{"ast":null,"code":"'use strict';\n\nconst {\n  kConnected,\n  kSize\n} = require('../../core/symbols');\nclass CompatWeakRef {\n  constructor(value) {\n    this.value = value;\n  }\n  deref() {\n    return this.value[kConnected] === 0 && this.value[kSize] === 0 ? undefined : this.value;\n  }\n}\nclass CompatFinalizer {\n  constructor(finalizer) {\n    this.finalizer = finalizer;\n  }\n  register(dispatcher, key) {\n    if (dispatcher.on) {\n      dispatcher.on('disconnect', () => {\n        if (dispatcher[kConnected] === 0 && dispatcher[kSize] === 0) {\n          this.finalizer(key);\n        }\n      });\n    }\n  }\n  unregister(key) {}\n}\nmodule.exports = function () {\n  // FIXME: remove workaround when the Node bug is backported to v18\n  // https://github.com/nodejs/node/issues/49344#issuecomment-1741776308\n  if (process.env.NODE_V8_COVERAGE && process.version.startsWith('v18')) {\n    process._rawDebug('Using compatibility WeakRef and FinalizationRegistry');\n    return {\n      WeakRef: CompatWeakRef,\n      FinalizationRegistry: CompatFinalizer\n    };\n  }\n  return {\n    WeakRef,\n    FinalizationRegistry\n  };\n};","map":{"version":3,"names":["kConnected","kSize","require","CompatWeakRef","constructor","value","deref","undefined","CompatFinalizer","finalizer","register","dispatcher","key","on","unregister","module","exports","process","env","NODE_V8_COVERAGE","version","startsWith","_rawDebug","WeakRef","FinalizationRegistry"],"sources":["/Users/nataliia/PussyProjects/react-app/node_modules/undici/lib/web/fetch/dispatcher-weakref.js"],"sourcesContent":["'use strict'\n\nconst { kConnected, kSize } = require('../../core/symbols')\n\nclass CompatWeakRef {\n  constructor (value) {\n    this.value = value\n  }\n\n  deref () {\n    return this.value[kConnected] === 0 && this.value[kSize] === 0\n      ? undefined\n      : this.value\n  }\n}\n\nclass CompatFinalizer {\n  constructor (finalizer) {\n    this.finalizer = finalizer\n  }\n\n  register (dispatcher, key) {\n    if (dispatcher.on) {\n      dispatcher.on('disconnect', () => {\n        if (dispatcher[kConnected] === 0 && dispatcher[kSize] === 0) {\n          this.finalizer(key)\n        }\n      })\n    }\n  }\n\n  unregister (key) {}\n}\n\nmodule.exports = function () {\n  // FIXME: remove workaround when the Node bug is backported to v18\n  // https://github.com/nodejs/node/issues/49344#issuecomment-1741776308\n  if (process.env.NODE_V8_COVERAGE && process.version.startsWith('v18')) {\n    process._rawDebug('Using compatibility WeakRef and FinalizationRegistry')\n    return {\n      WeakRef: CompatWeakRef,\n      FinalizationRegistry: CompatFinalizer\n    }\n  }\n  return { WeakRef, FinalizationRegistry }\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAM;EAAEA,UAAU;EAAEC;AAAM,CAAC,GAAGC,OAAO,CAAC,oBAAoB,CAAC;AAE3D,MAAMC,aAAa,CAAC;EAClBC,WAAWA,CAAEC,KAAK,EAAE;IAClB,IAAI,CAACA,KAAK,GAAGA,KAAK;EACpB;EAEAC,KAAKA,CAAA,EAAI;IACP,OAAO,IAAI,CAACD,KAAK,CAACL,UAAU,CAAC,KAAK,CAAC,IAAI,IAAI,CAACK,KAAK,CAACJ,KAAK,CAAC,KAAK,CAAC,GAC1DM,SAAS,GACT,IAAI,CAACF,KAAK;EAChB;AACF;AAEA,MAAMG,eAAe,CAAC;EACpBJ,WAAWA,CAAEK,SAAS,EAAE;IACtB,IAAI,CAACA,SAAS,GAAGA,SAAS;EAC5B;EAEAC,QAAQA,CAAEC,UAAU,EAAEC,GAAG,EAAE;IACzB,IAAID,UAAU,CAACE,EAAE,EAAE;MACjBF,UAAU,CAACE,EAAE,CAAC,YAAY,EAAE,MAAM;QAChC,IAAIF,UAAU,CAACX,UAAU,CAAC,KAAK,CAAC,IAAIW,UAAU,CAACV,KAAK,CAAC,KAAK,CAAC,EAAE;UAC3D,IAAI,CAACQ,SAAS,CAACG,GAAG,CAAC;QACrB;MACF,CAAC,CAAC;IACJ;EACF;EAEAE,UAAUA,CAAEF,GAAG,EAAE,CAAC;AACpB;AAEAG,MAAM,CAACC,OAAO,GAAG,YAAY;EAC3B;EACA;EACA,IAAIC,OAAO,CAACC,GAAG,CAACC,gBAAgB,IAAIF,OAAO,CAACG,OAAO,CAACC,UAAU,CAAC,KAAK,CAAC,EAAE;IACrEJ,OAAO,CAACK,SAAS,CAAC,sDAAsD,CAAC;IACzE,OAAO;MACLC,OAAO,EAAEpB,aAAa;MACtBqB,oBAAoB,EAAEhB;IACxB,CAAC;EACH;EACA,OAAO;IAAEe,OAAO;IAAEC;EAAqB,CAAC;AAC1C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}