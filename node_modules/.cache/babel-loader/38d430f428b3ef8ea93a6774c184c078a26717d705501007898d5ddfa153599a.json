{"ast":null,"code":"'use strict';\n\nconst {\n  parseSetCookie\n} = require('./parse');\nconst {\n  stringify\n} = require('./util');\nconst {\n  webidl\n} = require('../fetch/webidl');\nconst {\n  Headers\n} = require('../fetch/headers');\n\n/**\n * @typedef {Object} Cookie\n * @property {string} name\n * @property {string} value\n * @property {Date|number|undefined} expires\n * @property {number|undefined} maxAge\n * @property {string|undefined} domain\n * @property {string|undefined} path\n * @property {boolean|undefined} secure\n * @property {boolean|undefined} httpOnly\n * @property {'Strict'|'Lax'|'None'} sameSite\n * @property {string[]} unparsed\n */\n\n/**\n * @param {Headers} headers\n * @returns {Record<string, string>}\n */\nfunction getCookies(headers) {\n  webidl.argumentLengthCheck(arguments, 1, 'getCookies');\n  webidl.brandCheck(headers, Headers, {\n    strict: false\n  });\n  const cookie = headers.get('cookie');\n  const out = {};\n  if (!cookie) {\n    return out;\n  }\n  for (const piece of cookie.split(';')) {\n    const [name, ...value] = piece.split('=');\n    out[name.trim()] = value.join('=');\n  }\n  return out;\n}\n\n/**\n * @param {Headers} headers\n * @param {string} name\n * @param {{ path?: string, domain?: string }|undefined} attributes\n * @returns {void}\n */\nfunction deleteCookie(headers, name, attributes) {\n  webidl.brandCheck(headers, Headers, {\n    strict: false\n  });\n  const prefix = 'deleteCookie';\n  webidl.argumentLengthCheck(arguments, 2, prefix);\n  name = webidl.converters.DOMString(name, prefix, 'name');\n  attributes = webidl.converters.DeleteCookieAttributes(attributes);\n\n  // Matches behavior of\n  // https://github.com/denoland/deno_std/blob/63827b16330b82489a04614027c33b7904e08be5/http/cookie.ts#L278\n  setCookie(headers, {\n    name,\n    value: '',\n    expires: new Date(0),\n    ...attributes\n  });\n}\n\n/**\n * @param {Headers} headers\n * @returns {Cookie[]}\n */\nfunction getSetCookies(headers) {\n  webidl.argumentLengthCheck(arguments, 1, 'getSetCookies');\n  webidl.brandCheck(headers, Headers, {\n    strict: false\n  });\n  const cookies = headers.getSetCookie();\n  if (!cookies) {\n    return [];\n  }\n  return cookies.map(pair => parseSetCookie(pair));\n}\n\n/**\n * @param {Headers} headers\n * @param {Cookie} cookie\n * @returns {void}\n */\nfunction setCookie(headers, cookie) {\n  webidl.argumentLengthCheck(arguments, 2, 'setCookie');\n  webidl.brandCheck(headers, Headers, {\n    strict: false\n  });\n  cookie = webidl.converters.Cookie(cookie);\n  const str = stringify(cookie);\n  if (str) {\n    headers.append('Set-Cookie', str);\n  }\n}\nwebidl.converters.DeleteCookieAttributes = webidl.dictionaryConverter([{\n  converter: webidl.nullableConverter(webidl.converters.DOMString),\n  key: 'path',\n  defaultValue: () => null\n}, {\n  converter: webidl.nullableConverter(webidl.converters.DOMString),\n  key: 'domain',\n  defaultValue: () => null\n}]);\nwebidl.converters.Cookie = webidl.dictionaryConverter([{\n  converter: webidl.converters.DOMString,\n  key: 'name'\n}, {\n  converter: webidl.converters.DOMString,\n  key: 'value'\n}, {\n  converter: webidl.nullableConverter(value => {\n    if (typeof value === 'number') {\n      return webidl.converters['unsigned long long'](value);\n    }\n    return new Date(value);\n  }),\n  key: 'expires',\n  defaultValue: () => null\n}, {\n  converter: webidl.nullableConverter(webidl.converters['long long']),\n  key: 'maxAge',\n  defaultValue: () => null\n}, {\n  converter: webidl.nullableConverter(webidl.converters.DOMString),\n  key: 'domain',\n  defaultValue: () => null\n}, {\n  converter: webidl.nullableConverter(webidl.converters.DOMString),\n  key: 'path',\n  defaultValue: () => null\n}, {\n  converter: webidl.nullableConverter(webidl.converters.boolean),\n  key: 'secure',\n  defaultValue: () => null\n}, {\n  converter: webidl.nullableConverter(webidl.converters.boolean),\n  key: 'httpOnly',\n  defaultValue: () => null\n}, {\n  converter: webidl.converters.USVString,\n  key: 'sameSite',\n  allowedValues: ['Strict', 'Lax', 'None']\n}, {\n  converter: webidl.sequenceConverter(webidl.converters.DOMString),\n  key: 'unparsed',\n  defaultValue: () => new Array(0)\n}]);\nmodule.exports = {\n  getCookies,\n  deleteCookie,\n  getSetCookies,\n  setCookie\n};","map":{"version":3,"names":["parseSetCookie","require","stringify","webidl","Headers","getCookies","headers","argumentLengthCheck","arguments","brandCheck","strict","cookie","get","out","piece","split","name","value","trim","join","deleteCookie","attributes","prefix","converters","DOMString","DeleteCookieAttributes","setCookie","expires","Date","getSetCookies","cookies","getSetCookie","map","pair","Cookie","str","append","dictionaryConverter","converter","nullableConverter","key","defaultValue","boolean","USVString","allowedValues","sequenceConverter","Array","module","exports"],"sources":["/Users/nataliia/PussyProjects/react-app/node_modules/undici/lib/web/cookies/index.js"],"sourcesContent":["'use strict'\n\nconst { parseSetCookie } = require('./parse')\nconst { stringify } = require('./util')\nconst { webidl } = require('../fetch/webidl')\nconst { Headers } = require('../fetch/headers')\n\n/**\n * @typedef {Object} Cookie\n * @property {string} name\n * @property {string} value\n * @property {Date|number|undefined} expires\n * @property {number|undefined} maxAge\n * @property {string|undefined} domain\n * @property {string|undefined} path\n * @property {boolean|undefined} secure\n * @property {boolean|undefined} httpOnly\n * @property {'Strict'|'Lax'|'None'} sameSite\n * @property {string[]} unparsed\n */\n\n/**\n * @param {Headers} headers\n * @returns {Record<string, string>}\n */\nfunction getCookies (headers) {\n  webidl.argumentLengthCheck(arguments, 1, 'getCookies')\n\n  webidl.brandCheck(headers, Headers, { strict: false })\n\n  const cookie = headers.get('cookie')\n  const out = {}\n\n  if (!cookie) {\n    return out\n  }\n\n  for (const piece of cookie.split(';')) {\n    const [name, ...value] = piece.split('=')\n\n    out[name.trim()] = value.join('=')\n  }\n\n  return out\n}\n\n/**\n * @param {Headers} headers\n * @param {string} name\n * @param {{ path?: string, domain?: string }|undefined} attributes\n * @returns {void}\n */\nfunction deleteCookie (headers, name, attributes) {\n  webidl.brandCheck(headers, Headers, { strict: false })\n\n  const prefix = 'deleteCookie'\n  webidl.argumentLengthCheck(arguments, 2, prefix)\n\n  name = webidl.converters.DOMString(name, prefix, 'name')\n  attributes = webidl.converters.DeleteCookieAttributes(attributes)\n\n  // Matches behavior of\n  // https://github.com/denoland/deno_std/blob/63827b16330b82489a04614027c33b7904e08be5/http/cookie.ts#L278\n  setCookie(headers, {\n    name,\n    value: '',\n    expires: new Date(0),\n    ...attributes\n  })\n}\n\n/**\n * @param {Headers} headers\n * @returns {Cookie[]}\n */\nfunction getSetCookies (headers) {\n  webidl.argumentLengthCheck(arguments, 1, 'getSetCookies')\n\n  webidl.brandCheck(headers, Headers, { strict: false })\n\n  const cookies = headers.getSetCookie()\n\n  if (!cookies) {\n    return []\n  }\n\n  return cookies.map((pair) => parseSetCookie(pair))\n}\n\n/**\n * @param {Headers} headers\n * @param {Cookie} cookie\n * @returns {void}\n */\nfunction setCookie (headers, cookie) {\n  webidl.argumentLengthCheck(arguments, 2, 'setCookie')\n\n  webidl.brandCheck(headers, Headers, { strict: false })\n\n  cookie = webidl.converters.Cookie(cookie)\n\n  const str = stringify(cookie)\n\n  if (str) {\n    headers.append('Set-Cookie', str)\n  }\n}\n\nwebidl.converters.DeleteCookieAttributes = webidl.dictionaryConverter([\n  {\n    converter: webidl.nullableConverter(webidl.converters.DOMString),\n    key: 'path',\n    defaultValue: () => null\n  },\n  {\n    converter: webidl.nullableConverter(webidl.converters.DOMString),\n    key: 'domain',\n    defaultValue: () => null\n  }\n])\n\nwebidl.converters.Cookie = webidl.dictionaryConverter([\n  {\n    converter: webidl.converters.DOMString,\n    key: 'name'\n  },\n  {\n    converter: webidl.converters.DOMString,\n    key: 'value'\n  },\n  {\n    converter: webidl.nullableConverter((value) => {\n      if (typeof value === 'number') {\n        return webidl.converters['unsigned long long'](value)\n      }\n\n      return new Date(value)\n    }),\n    key: 'expires',\n    defaultValue: () => null\n  },\n  {\n    converter: webidl.nullableConverter(webidl.converters['long long']),\n    key: 'maxAge',\n    defaultValue: () => null\n  },\n  {\n    converter: webidl.nullableConverter(webidl.converters.DOMString),\n    key: 'domain',\n    defaultValue: () => null\n  },\n  {\n    converter: webidl.nullableConverter(webidl.converters.DOMString),\n    key: 'path',\n    defaultValue: () => null\n  },\n  {\n    converter: webidl.nullableConverter(webidl.converters.boolean),\n    key: 'secure',\n    defaultValue: () => null\n  },\n  {\n    converter: webidl.nullableConverter(webidl.converters.boolean),\n    key: 'httpOnly',\n    defaultValue: () => null\n  },\n  {\n    converter: webidl.converters.USVString,\n    key: 'sameSite',\n    allowedValues: ['Strict', 'Lax', 'None']\n  },\n  {\n    converter: webidl.sequenceConverter(webidl.converters.DOMString),\n    key: 'unparsed',\n    defaultValue: () => new Array(0)\n  }\n])\n\nmodule.exports = {\n  getCookies,\n  deleteCookie,\n  getSetCookies,\n  setCookie\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}