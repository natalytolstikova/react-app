{"ast":null,"code":"'use strict';\n\nconst {\n  kConstruct\n} = require('./symbols');\nconst {\n  Cache\n} = require('./cache');\nconst {\n  webidl\n} = require('../fetch/webidl');\nconst {\n  kEnumerableProperty\n} = require('../../core/util');\nclass CacheStorage {\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#dfn-relevant-name-to-cache-map\n   * @type {Map<string, import('./cache').requestResponseList}\n   */\n  #caches = new Map();\n  constructor() {\n    if (arguments[0] !== kConstruct) {\n      webidl.illegalConstructor();\n    }\n  }\n  async match(request, options = {}) {\n    webidl.brandCheck(this, CacheStorage);\n    webidl.argumentLengthCheck(arguments, 1, 'CacheStorage.match');\n    request = webidl.converters.RequestInfo(request);\n    options = webidl.converters.MultiCacheQueryOptions(options);\n\n    // 1.\n    if (options.cacheName != null) {\n      // 1.1.1.1\n      if (this.#caches.has(options.cacheName)) {\n        // 1.1.1.1.1\n        const cacheList = this.#caches.get(options.cacheName);\n        const cache = new Cache(kConstruct, cacheList);\n        return await cache.match(request, options);\n      }\n    } else {\n      // 2.\n      // 2.2\n      for (const cacheList of this.#caches.values()) {\n        const cache = new Cache(kConstruct, cacheList);\n\n        // 2.2.1.2\n        const response = await cache.match(request, options);\n        if (response !== undefined) {\n          return response;\n        }\n      }\n    }\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#cache-storage-has\n   * @param {string} cacheName\n   * @returns {Promise<boolean>}\n   */\n  async has(cacheName) {\n    webidl.brandCheck(this, CacheStorage);\n    const prefix = 'CacheStorage.has';\n    webidl.argumentLengthCheck(arguments, 1, prefix);\n    cacheName = webidl.converters.DOMString(cacheName, prefix, 'cacheName');\n\n    // 2.1.1\n    // 2.2\n    return this.#caches.has(cacheName);\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#dom-cachestorage-open\n   * @param {string} cacheName\n   * @returns {Promise<Cache>}\n   */\n  async open(cacheName) {\n    webidl.brandCheck(this, CacheStorage);\n    const prefix = 'CacheStorage.open';\n    webidl.argumentLengthCheck(arguments, 1, prefix);\n    cacheName = webidl.converters.DOMString(cacheName, prefix, 'cacheName');\n\n    // 2.1\n    if (this.#caches.has(cacheName)) {\n      // await caches.open('v1') !== await caches.open('v1')\n\n      // 2.1.1\n      const cache = this.#caches.get(cacheName);\n\n      // 2.1.1.1\n      return new Cache(kConstruct, cache);\n    }\n\n    // 2.2\n    const cache = [];\n\n    // 2.3\n    this.#caches.set(cacheName, cache);\n\n    // 2.4\n    return new Cache(kConstruct, cache);\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#cache-storage-delete\n   * @param {string} cacheName\n   * @returns {Promise<boolean>}\n   */\n  async delete(cacheName) {\n    webidl.brandCheck(this, CacheStorage);\n    const prefix = 'CacheStorage.delete';\n    webidl.argumentLengthCheck(arguments, 1, prefix);\n    cacheName = webidl.converters.DOMString(cacheName, prefix, 'cacheName');\n    return this.#caches.delete(cacheName);\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#cache-storage-keys\n   * @returns {Promise<string[]>}\n   */\n  async keys() {\n    webidl.brandCheck(this, CacheStorage);\n\n    // 2.1\n    const keys = this.#caches.keys();\n\n    // 2.2\n    return [...keys];\n  }\n}\nObject.defineProperties(CacheStorage.prototype, {\n  [Symbol.toStringTag]: {\n    value: 'CacheStorage',\n    configurable: true\n  },\n  match: kEnumerableProperty,\n  has: kEnumerableProperty,\n  open: kEnumerableProperty,\n  delete: kEnumerableProperty,\n  keys: kEnumerableProperty\n});\nmodule.exports = {\n  CacheStorage\n};","map":{"version":3,"names":["kConstruct","require","Cache","webidl","kEnumerableProperty","CacheStorage","caches","Map","constructor","arguments","illegalConstructor","match","request","options","brandCheck","argumentLengthCheck","converters","RequestInfo","MultiCacheQueryOptions","cacheName","has","cacheList","get","cache","values","response","undefined","prefix","DOMString","open","set","delete","keys","Object","defineProperties","prototype","Symbol","toStringTag","value","configurable","module","exports"],"sources":["/Users/nataliia/PussyProjects/react-app/node_modules/undici/lib/web/cache/cachestorage.js"],"sourcesContent":["'use strict'\n\nconst { kConstruct } = require('./symbols')\nconst { Cache } = require('./cache')\nconst { webidl } = require('../fetch/webidl')\nconst { kEnumerableProperty } = require('../../core/util')\n\nclass CacheStorage {\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#dfn-relevant-name-to-cache-map\n   * @type {Map<string, import('./cache').requestResponseList}\n   */\n  #caches = new Map()\n\n  constructor () {\n    if (arguments[0] !== kConstruct) {\n      webidl.illegalConstructor()\n    }\n  }\n\n  async match (request, options = {}) {\n    webidl.brandCheck(this, CacheStorage)\n    webidl.argumentLengthCheck(arguments, 1, 'CacheStorage.match')\n\n    request = webidl.converters.RequestInfo(request)\n    options = webidl.converters.MultiCacheQueryOptions(options)\n\n    // 1.\n    if (options.cacheName != null) {\n      // 1.1.1.1\n      if (this.#caches.has(options.cacheName)) {\n        // 1.1.1.1.1\n        const cacheList = this.#caches.get(options.cacheName)\n        const cache = new Cache(kConstruct, cacheList)\n\n        return await cache.match(request, options)\n      }\n    } else { // 2.\n      // 2.2\n      for (const cacheList of this.#caches.values()) {\n        const cache = new Cache(kConstruct, cacheList)\n\n        // 2.2.1.2\n        const response = await cache.match(request, options)\n\n        if (response !== undefined) {\n          return response\n        }\n      }\n    }\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#cache-storage-has\n   * @param {string} cacheName\n   * @returns {Promise<boolean>}\n   */\n  async has (cacheName) {\n    webidl.brandCheck(this, CacheStorage)\n\n    const prefix = 'CacheStorage.has'\n    webidl.argumentLengthCheck(arguments, 1, prefix)\n\n    cacheName = webidl.converters.DOMString(cacheName, prefix, 'cacheName')\n\n    // 2.1.1\n    // 2.2\n    return this.#caches.has(cacheName)\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#dom-cachestorage-open\n   * @param {string} cacheName\n   * @returns {Promise<Cache>}\n   */\n  async open (cacheName) {\n    webidl.brandCheck(this, CacheStorage)\n\n    const prefix = 'CacheStorage.open'\n    webidl.argumentLengthCheck(arguments, 1, prefix)\n\n    cacheName = webidl.converters.DOMString(cacheName, prefix, 'cacheName')\n\n    // 2.1\n    if (this.#caches.has(cacheName)) {\n      // await caches.open('v1') !== await caches.open('v1')\n\n      // 2.1.1\n      const cache = this.#caches.get(cacheName)\n\n      // 2.1.1.1\n      return new Cache(kConstruct, cache)\n    }\n\n    // 2.2\n    const cache = []\n\n    // 2.3\n    this.#caches.set(cacheName, cache)\n\n    // 2.4\n    return new Cache(kConstruct, cache)\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#cache-storage-delete\n   * @param {string} cacheName\n   * @returns {Promise<boolean>}\n   */\n  async delete (cacheName) {\n    webidl.brandCheck(this, CacheStorage)\n\n    const prefix = 'CacheStorage.delete'\n    webidl.argumentLengthCheck(arguments, 1, prefix)\n\n    cacheName = webidl.converters.DOMString(cacheName, prefix, 'cacheName')\n\n    return this.#caches.delete(cacheName)\n  }\n\n  /**\n   * @see https://w3c.github.io/ServiceWorker/#cache-storage-keys\n   * @returns {Promise<string[]>}\n   */\n  async keys () {\n    webidl.brandCheck(this, CacheStorage)\n\n    // 2.1\n    const keys = this.#caches.keys()\n\n    // 2.2\n    return [...keys]\n  }\n}\n\nObject.defineProperties(CacheStorage.prototype, {\n  [Symbol.toStringTag]: {\n    value: 'CacheStorage',\n    configurable: true\n  },\n  match: kEnumerableProperty,\n  has: kEnumerableProperty,\n  open: kEnumerableProperty,\n  delete: kEnumerableProperty,\n  keys: kEnumerableProperty\n})\n\nmodule.exports = {\n  CacheStorage\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}